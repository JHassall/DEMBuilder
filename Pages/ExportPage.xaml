<UserControl x:Class="DEMBuilder.Pages.ExportPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      mc:Ignorable="d"
      d:DesignHeight="600" d:DesignWidth="900">
    <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Top" Margin="20" MaxWidth="800">
                <TextBlock Text="Step 6: Export DEM" FontSize="24" FontWeight="Bold" Margin="0,0,0,20" HorizontalAlignment="Center"/>
                <TextBlock x:Name="StatusText" Text="Ready to export DEM data." Margin="0,0,0,20" HorizontalAlignment="Center" TextWrapping="Wrap"/>
                
                <!-- Export Format Selection -->
                <GroupBox Header="Export Format" Margin="0,0,0,15" Padding="10">
                    <StackPanel>
                        <RadioButton x:Name="TxtFormatRadio" Content="Text File (.txt)" Margin="0,5"/>
                        <RadioButton x:Name="GeoTiffFormatRadio" Content="GeoTIFF (.tif) - AgOpenGPS Compatible" Margin="0,5"/>
                        <RadioButton x:Name="RgFdemFormatRadio" Content="RgF DEM (.RgFdem) - Single File for ABLS" IsChecked="True" Margin="0,5"/>
                        <TextBlock Text="âœ… Recommended: RgF DEM creates a single file optimized for thumb drives and wireless transfer" 
                                   FontStyle="Italic" Foreground="DarkGreen" Margin="20,2,0,5" TextWrapping="Wrap"/>
                    </StackPanel>
                </GroupBox>

                <!-- GeoTIFF Export Parameters -->
                <GroupBox x:Name="GeoTiffParametersGroup" Header="GeoTIFF Export Parameters" Margin="0,0,0,15" Padding="10" IsEnabled="False">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Resolution (meters/pixel):" VerticalAlignment="Center" Margin="0,5"/>
                        <TextBox x:Name="ResolutionTextBox" Grid.Row="0" Grid.Column="1" Text="0.25" Margin="5" VerticalAlignment="Center"/>
                        <TextBlock Grid.Row="0" Grid.Column="2" Text="Higher resolution = larger file size" FontStyle="Italic" Foreground="Gray" VerticalAlignment="Center" Margin="5,0"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Tile Size (meters):" VerticalAlignment="Center" Margin="0,5"/>
                        <TextBox x:Name="TileSizeTextBox" Grid.Row="1" Grid.Column="1" Text="50" Margin="5" VerticalAlignment="Center"/>
                        <TextBlock Grid.Row="1" Grid.Column="2" Text="0 = single file, >0 = tiled output" FontStyle="Italic" Foreground="Gray" VerticalAlignment="Center" Margin="5,0"/>

                        <CheckBox x:Name="EnableTilingCheckBox" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Content="Enable tiling for large datasets" Margin="0,10,0,5" IsChecked="True"/>
                        
                        <TextBlock Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" Text="Note: GeoTIFF exports use AgOpenGPS-compatible local coordinate system" 
                                   FontStyle="Italic" Foreground="DarkBlue" Margin="0,5" TextWrapping="Wrap"/>
                    </Grid>
                </GroupBox>

                <!-- RgF DEM Export Parameters -->
                <GroupBox x:Name="RgFdemParametersGroup" Header="RgF DEM Export Parameters" Margin="0,0,0,15" Padding="10" IsEnabled="True">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Resolution (meters/pixel):" VerticalAlignment="Center" Margin="0,5"/>
                        <TextBox x:Name="RgFdemResolutionTextBox" Grid.Row="0" Grid.Column="1" Text="0.25" Margin="5" VerticalAlignment="Center"/>
                        <TextBlock Grid.Row="0" Grid.Column="2" Text="Optimized for agricultural operations" FontStyle="Italic" Foreground="Gray" VerticalAlignment="Center" Margin="5,0"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" 
                                   Text="ðŸ’¾ Single file output - perfect for thumb drives and wireless transfer to ABLS software" 
                                   FontStyle="Italic" Foreground="DarkGreen" Margin="0,10,0,5" TextWrapping="Wrap"/>
                        
                        <TextBlock Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3" 
                                   Text="ðŸ“¦ Includes: DEM data, metadata, coordinate system info, and documentation" 
                                   FontStyle="Italic" Foreground="DarkBlue" Margin="0,5" TextWrapping="Wrap"/>
                    </Grid>
                </GroupBox>

                <!-- Export Progress -->
                <StackPanel x:Name="ExportProgressPanel" Visibility="Collapsed" Margin="0,0,0,15">
                    <TextBlock x:Name="ExportProgressText" Text="" HorizontalAlignment="Center" Margin="0,5"/>
                    <ProgressBar x:Name="ExportProgressBar" Height="20" Margin="0,5" Minimum="0" Maximum="100"/>
                </StackPanel>

                <!-- Export Buttons -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10">
                    <Button x:Name="ExportButton" Content="Export DEM" Click="ExportButton_Click" Width="120" Height="35" Margin="5"/>
                    <Button x:Name="PreviewButton" Content="Preview Settings" Click="PreviewButton_Click" Width="120" Height="35" Margin="5"/>
                </StackPanel>

                <!-- Export Summary -->
                <TextBlock x:Name="ExportSummaryText" Text="" TextWrapping="Wrap" HorizontalAlignment="Center" 
                           Margin="0,10" FontStyle="Italic" Foreground="DarkGreen" Visibility="Collapsed"/>

                <!-- Post Export Navigation -->
                <StackPanel x:Name="PostExportNavigationPanel" Orientation="Horizontal" HorizontalAlignment="Center" Visibility="Collapsed" Margin="0,20,0,0">
                    <Button x:Name="BackButton" Content="Back" Click="BackButton_Click" Width="120" Height="35" Margin="5"/>
                    <Button x:Name="SelectMorePointsButton" Content="Select More Points" Click="SelectMorePointsButton_Click" Width="150" Height="35" Margin="5"/>
                    <Button x:Name="ExitButton" Content="Exit" Click="ExitButton_Click" Width="120" Height="35" Margin="5"/>
                </StackPanel>
                
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
